const _0xc68e44=_0xfebd;(function(_0x52aa80,_0x1c4efb){const _0x40c257=_0xfebd,_0xc4e000=_0x52aa80();while(!![]){try{const _0x39b4fe=-parseInt(_0x40c257(0x96))/0x1+parseInt(_0x40c257(0x87))/0x2*(parseInt(_0x40c257(0x8e))/0x3)+-parseInt(_0x40c257(0x7b))/0x4*(-parseInt(_0x40c257(0xae))/0x5)+parseInt(_0x40c257(0xb4))/0x6*(parseInt(_0x40c257(0x9f))/0x7)+-parseInt(_0x40c257(0xb2))/0x8*(-parseInt(_0x40c257(0x95))/0x9)+parseInt(_0x40c257(0x8a))/0xa*(-parseInt(_0x40c257(0x7a))/0xb)+-parseInt(_0x40c257(0x7e))/0xc;if(_0x39b4fe===_0x1c4efb)break;else _0xc4e000['push'](_0xc4e000['shift']());}catch(_0x15f4e7){_0xc4e000['push'](_0xc4e000['shift']());}}}(_0x1347,0x1d5bb));import{world,system,ItemStack}from'@minecraft/server';import _0x1b14e0 from'./config';let cooldown={},traps={'id':0x0,'traps':[]};function _0xfebd(_0x16ca52,_0x1674c6){const _0x13474f=_0x1347();return _0xfebd=function(_0xfebd90,_0x2fceee){_0xfebd90=_0xfebd90-0x78;let _0x537b29=_0x13474f[_0xfebd90];return _0x537b29;},_0xfebd(_0x16ca52,_0x1674c6);}world[_0xc68e44(0x8d)][_0xc68e44(0x9b)][_0xc68e44(0xb5)](({itemStack:_0x14077f,source:_0x213c67})=>{const _0x51864f=_0xc68e44;if(_0x213c67[_0x51864f(0xab)]!=='minecraft:player')return;if(_0x14077f[_0x51864f(0xab)]!==_0x1b14e0[_0x51864f(0x81)]['typeId'])return;const _0x3f6bb4=_0x14077f[_0x51864f(0x97)]();for(const _0x2528a2 of _0x3f6bb4){for(const _0x601f7b of _0x1b14e0[_0x51864f(0x81)]['lore']){if(_0x2528a2!==_0x601f7b)return;}}const {x:_0x3aebf5,y:_0x207183,z:_0x5beed2}=_0x213c67[_0x51864f(0x78)];if(_0x207183<_0x1b14e0[_0x51864f(0x9e)]||_0x207183>_0x1b14e0[_0x51864f(0x8c)])return _0x1b14e0[_0x51864f(0xa4)][_0x51864f(0x90)](_0x213c67);if(cooldown[_0x213c67[_0x51864f(0x7d)]]>Date['now']()){let _0x2e64eb=cooldown[_0x213c67[_0x51864f(0x7d)]]-Date[_0x51864f(0xb0)]();_0x2e64eb=_0x2e64eb/0x3e8,_0x1b14e0[_0x51864f(0xa4)][_0x51864f(0x89)](_0x213c67,_0x2e64eb);}else{if(nearTraps({'x':_0x3aebf5,'y':_0x207183,'z':_0x5beed2,'dimension':_0x213c67[_0x51864f(0xa0)]['id']}))return _0x1b14e0[_0x51864f(0xa4)][_0x51864f(0x85)](_0x213c67);cooldown[_0x213c67[_0x51864f(0x7d)]]=_0x1b14e0[_0x51864f(0x89)]*0x3e8+Date[_0x51864f(0xb0)](),createTrap(_0x213c67,_0x213c67[_0x51864f(0x84)]);}});let cache=[];async function createTrap(_0x254479,_0x47f9b6){const _0x470552=_0xc68e44,_0x23c1a4=_0x254479[_0x470552(0x99)](_0x470552(0xa7))[_0x470552(0xa1)],_0x14a8be=_0x23c1a4['getItem'](_0x47f9b6);_0x14a8be[_0x470552(0x86)]>0x1?(_0x14a8be[_0x470552(0x86)]=_0x14a8be[_0x470552(0x86)]-0x1,_0x23c1a4[_0x470552(0x88)](_0x47f9b6,_0x14a8be)):_0x254479[_0x470552(0x9a)](_0x470552(0xa3)+_0x47f9b6+_0x470552(0xac));_0x1b14e0[_0x470552(0x8f)]&&_0x254479[_0x470552(0xa6)](_0x1b14e0[_0x470552(0x8f)]);const {x:_0x421ca6,y:_0x241687,z:_0x370fba}=_0x254479[_0x470552(0x78)];await _0x254479[_0x470552(0xa0)][_0x470552(0x9a)]('structure\x20save\x20Trap_'+traps['id']+'\x20'+(_0x421ca6-0x2)+'\x20'+(_0x241687-0x1)+'\x20'+(_0x370fba-0x2)+'\x20'+(_0x421ca6+0x2)+'\x20'+(_0x241687+0x3)+'\x20'+(_0x370fba+0x2)+_0x470552(0xa2)),await _0x254479[_0x470552(0xa0)][_0x470552(0x9a)]('structure\x20load\x20trap\x20'+(_0x421ca6-0x2)+'\x20'+(_0x241687-0x1)+'\x20'+(_0x370fba-0x2)),traps[_0x470552(0x80)][_0x470552(0x98)]({'x1':_0x421ca6-0x3,'x2':_0x421ca6+0x3,'y1':_0x241687-0x2,'y2':_0x241687+0x4,'z1':_0x370fba-0x3,'z2':_0x370fba+0x3,'dimension':_0x254479[_0x470552(0xa0)]['id'],'id':traps['id'],'time':Date[_0x470552(0xb0)]()+_0x1b14e0[_0x470552(0x9d)]*0x3e8,'coordinates':{'x':_0x421ca6,'y':_0x241687,'z':_0x370fba}}),traps['id']++;}function nearTraps(_0x26f05d){const _0x3d279e=_0xc68e44,{x:_0xf9a3b0,y:_0x1635c3,z:_0x439086,dimension:_0x3f9f56}=_0x26f05d;for(const _0x4b6da5 of traps[_0x3d279e(0x80)]){const {x1:_0x2383af,x2:_0xc41a53,y1:_0x1a04ce,y2:_0x152176,z1:_0x483a1c,z2:_0x371cae,dimension:_0x3c3f03}=_0x4b6da5,_0x50a44d=0x5;if(_0x2383af+_0x50a44d<=_0xf9a3b0&&_0xc41a53+_0x50a44d>=_0xf9a3b0&&_0x1a04ce+_0x50a44d<=_0x1635c3&&_0x152176+_0x50a44d>=_0x1635c3&&_0x483a1c+_0x50a44d<=_0x439086&&_0x371cae+_0x50a44d>=_0x439086&&_0x3c3f03==_0x3c3f03)return!![];if(_0x2383af-_0x50a44d<=_0xf9a3b0&&_0xc41a53-_0x50a44d>=_0xf9a3b0&&_0x1a04ce-_0x50a44d<=_0x1635c3&&_0x152176-_0x50a44d>=_0x1635c3&&_0x483a1c-_0x50a44d<=_0x439086&&_0x371cae-_0x50a44d>=_0x439086&&_0x3c3f03==_0x3c3f03)return!![];if(_0x2383af-_0x50a44d<=_0xf9a3b0&&_0xc41a53+_0x50a44d>=_0xf9a3b0&&_0x1a04ce-_0x50a44d<=_0x1635c3&&_0x152176+_0x50a44d>=_0x1635c3&&_0x483a1c-_0x50a44d<=_0x439086&&_0x371cae+_0x50a44d>=_0x439086&&_0x3c3f03==_0x3c3f03)return!![];}}world[_0xc68e44(0x93)][_0xc68e44(0x79)][_0xc68e44(0xb5)](_0x2e71cf=>{const _0x11ef13=_0xc68e44,{player:_0x4bacd4,block:_0x29bc33}=_0x2e71cf;if(_0x4bacd4[_0x11ef13(0x8b)](_0x1b14e0['admin_tag']))return;const {x:_0x4e19b1,y:_0x1337b4,z:_0x3e220e}=_0x29bc33[_0x11ef13(0x78)];for(const _0xabd5bf of traps['traps']){const {x1:_0x163e67,x2:_0x2d0ca4,y1:_0x2f366e,y2:_0x3a1522,z1:_0x57cbc9,z2:_0x4dd715,dimension:_0x3ef010}=_0xabd5bf,{x:_0x5723af,y:_0x265776,z:_0x327b4c}=_0x29bc33[_0x11ef13(0x78)];_0x163e67<=_0x5723af+0x1&&_0x2d0ca4>=_0x5723af&&_0x2f366e<=_0x265776&&_0x3a1522>=_0x265776&&_0x57cbc9<=_0x327b4c+0x1&&_0x4dd715>=_0x327b4c&&_0x3ef010==_0x4bacd4[_0x11ef13(0xa0)]['id']&&(_0x2e71cf[_0x11ef13(0xa8)]=!![],_0x1b14e0[_0x11ef13(0xa4)][_0x11ef13(0xaf)](_0x4bacd4));}}),world[_0xc68e44(0x93)][_0xc68e44(0x9c)][_0xc68e44(0xb5)](_0x4eb430=>{const _0x470480=_0xc68e44,{player:_0x19300e,block:_0x4179de}=_0x4eb430;if(_0x19300e[_0x470480(0x8b)](_0x1b14e0['admin_tag']))return;const {x:_0x176213,y:_0x32d554,z:_0x393f1f}=_0x4179de['location'];for(const _0x15e718 of traps[_0x470480(0x80)]){const {x1:_0x67a9c9,x2:_0x326adf,y1:_0x21210f,y2:_0x184800,z1:_0xc30fca,z2:_0xd08d47,dimension:_0x5a5007}=_0x15e718,{x:_0x1403c7,y:_0x14e503,z:_0x3b4d3d}=_0x4179de[_0x470480(0x78)];_0x67a9c9<=_0x1403c7+0x1&&_0x326adf>=_0x1403c7&&_0x21210f<=_0x14e503&&_0x184800>=_0x14e503&&_0xc30fca<=_0x3b4d3d+0x1&&_0xd08d47>=_0x3b4d3d&&_0x5a5007==_0x19300e['dimension']['id']&&(_0x4eb430[_0x470480(0xa8)]=!![],_0x1b14e0['messages'][_0x470480(0xaf)](_0x19300e));}}),system['runInterval'](async()=>{const _0x2f279d=_0xc68e44;for(let _0x3e26dc=0x0;_0x3e26dc<traps[_0x2f279d(0x80)][_0x2f279d(0xad)];_0x3e26dc++){const _0x3ab228=traps['traps'][_0x3e26dc];if(_0x3ab228[_0x2f279d(0x94)]<=Date[_0x2f279d(0xb0)]()){const {x:_0x28439e,y:_0x11c016,z:_0x5e6c2b}=_0x3ab228[_0x2f279d(0x91)],_0x47bf8f=world[_0x2f279d(0x82)](_0x3ab228[_0x2f279d(0xa0)]);await _0x47bf8f[_0x2f279d(0x9a)](_0x2f279d(0x7f)+_0x3ab228['id']+'\x20'+(_0x28439e-0x2)+'\x20'+(_0x11c016-0x1)+'\x20'+(_0x5e6c2b-0x2)),await _0x47bf8f[_0x2f279d(0x9a)]('structure\x20delete\x20Trap_'+_0x3ab228['id']),traps[_0x2f279d(0x80)][_0x2f279d(0xa9)](_0x3e26dc,0x1);}}},0x5),system['afterEvents'][_0xc68e44(0xaa)][_0xc68e44(0xb5)](({id:_0x361652,sourceEntity:_0x28358f,message:_0x5776cb})=>{const _0x312621=_0xc68e44;if(_0x361652=='take:trap'){const _0x11f39f=new ItemStack(_0x1b14e0['item']['typeId']);_0x11f39f['nameTag']=_0x1b14e0[_0x312621(0x81)][_0x312621(0x7d)]==''?undefined:_0x1b14e0[_0x312621(0x81)][_0x312621(0x7d)];if(_0x1b14e0[_0x312621(0x81)]['lore'][_0x312621(0xad)]>0x0){for(let _0x2fe195=0x0;_0x2fe195<_0x1b14e0[_0x312621(0x81)][_0x312621(0x7c)]['length'];_0x2fe195++){const _0x4fa97f=_0x1b14e0['item'][_0x312621(0x7c)][_0x2fe195];if(_0x4fa97f[_0x312621(0xad)]>0x32)return _0x28358f[_0x312621(0xa5)](_0x312621(0xb3)+(_0x2fe195+0x1)+_0x312621(0x92)+_0x4fa97f[_0x312621(0xad)]+_0x312621(0x83));}_0x11f39f[_0x312621(0xb1)](_0x1b14e0['item'][_0x312621(0x7c)]);}_0x28358f[_0x312621(0x99)]('inventory')[_0x312621(0xa1)]['addItem'](_0x11f39f);}},{'namespaces':['take']});function _0x1347(){const _0xbce4dd=['playerBreakBlock','1639pcwDQl','2112fAOqAo','lore','name','1322700TIbvnJ','structure\x20load\x20Trap_','traps','item','getDimension','\x20из\x2050\x20символов)','selectedSlot','near_trap','amount','261438eBGxGe','setItem','cooldown','9550EjXlxn','hasTag','max_y','afterEvents','3lOkelt','sound','y_cancel','coordinates','\x20в\x20описании\x20предмета\x20слишком\x20длинная!\x20(','beforeEvents','time','4572oDZVse','155832FRZUAI','getLore','push','getComponent','runCommandAsync','itemUse','playerPlaceBlock','deleteTime','min_y','1652HPGqPw','dimension','container','\x20false\x20disk','replaceitem\x20entity\x20@s\x20slot.hotbar\x20','messages','sendMessage','playSound','inventory','cancel','splice','scriptEventReceive','typeId','\x20air','length','545DVMFhg','place_cancel','now','setLore','2312UWUSHm','§cСтрока\x20','4920CFzSie','subscribe','location'];_0x1347=function(){return _0xbce4dd;};return _0x1347();}